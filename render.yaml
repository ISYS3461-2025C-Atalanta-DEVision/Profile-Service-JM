# Render Blueprint for Profile Service
# Deploy with: render blueprint sync

services:
  - type: web
    name: profile-service
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    region: singapore  # Change based on your preference
    plan: free  # Options: free, starter, standard, pro
    healthCheckPath: /actuator/health
    envVars:
      # Spring Profile
      - key: SPRING_PROFILES_ACTIVE
        value: prod

      # MongoDB Connection (set in Render dashboard)
      - key: MONGODB_URI
        sync: false  # Must be set manually in dashboard
      - key: MONGODB_DATABASE
        value: profile_db

      # Kafka Configuration (Internal Render network)
      - key: KAFKA_BOOTSTRAP_SERVERS
        value: kafka:9092
      - key: KAFKA_CONSUMER_GROUP
        value: profile-service-group

      # Eureka Server URL (Service Discovery)
      - key: EUREKA_URL
        sync: false
      - key: EUREKA_ENABLED
        value: "true"

      # Mail Configuration (optional)
      - key: MAIL_HOST
        sync: false
      - key: MAIL_PORT
        value: "587"
      - key: MAIL_USERNAME
        sync: false
      - key: MAIL_PASSWORD
        sync: false

      # Application Configuration
      - key: APP_NAME
        value: JobMatch
      - key: SUBSCRIPTION_UPGRADE_URL
        sync: false
